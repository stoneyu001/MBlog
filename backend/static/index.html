<!DOCTYPE html>
<html>
<head>
    <title>文章管理</title>
    <style>
        body { max-width: 800px; margin: 20px auto; padding: 20px; }
        table { width: 100%; border-collapse: collapse; }
        td, th { border: 1px solid #ddd; padding: 8px; }
    </style>
</head>
<body>
    <h1>文章管理</h1>
    
    <!-- 新增文章表单 -->
    <form id="articleForm">
        <input type="text" name="title" placeholder="标题" required>
        <textarea name="content" placeholder="内容" required></textarea>
        <button type="submit">发布文章</button>
    </form>

    <!-- 文章列表 -->
    <table id="articleList">
        <thead><tr><th>ID</th><th>标题</th><th>时间</th></tr></thead>
        <tbody></tbody>
    </table>

    <script>
        // 加载文章列表
        fetch('/api/articles')
            .then(res => res.json())
            .then(data => {
                const tbody = document.querySelector('#articleList tbody')
                tbody.innerHTML = data.map(article => `
                    <tr>
                        <td>${article.id}</td>
                        <td>${article.title}</td>
                        <td>${new Date(article.created_at).toLocaleString()}</td>
                    </tr>
                `).join('')
            })

        // 提交新文章
        document.getElementById('articleForm').addEventListener('submit', e => {
            e.preventDefault()
            
            const formData = {
                title: e.target.title.value,
                content: e.target.content.value
            }

            fetch('/articles', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
            })
            .then(() => location.reload()) // 提交后刷新列表
        })
    </script>
</body>
</html>
